#!/bin/bash
# =====================================================
# MyCard - 원클릭 설치 및 배포
# Ubuntu 24.04 서버에서 실행
# =====================================================

set -e

echo ""
echo "=========================================="
echo "   MyCard 원클릭 설치 및 배포"
echo "   Ubuntu 24.04 Server"
echo "=========================================="
echo ""

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

# 1. 환경 설정 (Java, Node.js, MySQL, Nginx 설치)
echo ">>> 1단계: 환경 설정 시작..."
bash ${SCRIPT_DIR}/setup_ubuntu.sh

# 2. 프로젝트 배포 (빌드 및 서비스 시작)
echo ""
echo ">>> 2단계: 프로젝트 배포 시작..."
bash ${SCRIPT_DIR}/deploy.sh

echo ""
echo "=========================================="
echo "   모든 설치 및 배포 완료!"
echo "=========================================="
