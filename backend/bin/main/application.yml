server:
  port: 8080
  servlet:
    context-path: /api

spring:
  application:
    name: mycard-api

  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/mycard?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul}
    username: ${DB_USERNAME:mycard}
    password: ${DB_PASSWORD:mycard_password}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: false
    open-in-view: false

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: false

  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 20MB

  jackson:
    serialization:
      write-dates-as-timestamps: false
    date-format: yyyy-MM-dd'T'HH:mm:ss.SSSZ
    time-zone: Asia/Seoul

# Application custom properties
app:
  jwt:
    secret: ${JWT_SECRET:your-256-bit-secret-key-for-jwt-signing-must-be-at-least-32-chars}
    access-token-validity-ms: 900000      # 15 minutes
    refresh-token-validity-ms: 604800000  # 7 days

  upload:
    base-path: ${UPLOAD_PATH:/var/lib/mycard/uploads}
    allowed-extensions: pdf,png,jpg,jpeg,gif,doc,docx,xls,xlsx
    max-file-size: 10485760  # 10MB

  security:
    login-attempt-limit: 5
    login-lockout-duration-minutes: 30

# Logging
logging:
  level:
    root: INFO
    com.mycard: DEBUG
    org.springframework.security: INFO
    org.hibernate.SQL: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] [%X{requestId}] %-5level %logger{36} - %msg%n"

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized

# OpenAPI
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method
